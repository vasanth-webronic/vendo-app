# Vamo Store - Smart Vending Machine Store

A modern Progressive Web App (PWA) for vending machine purchases built with Next.js, React, and TypeScript. Features real-time VM monitoring, multi-language support, and user-friendly error handling.

## âœ¨ Features

### User Experience
- ğŸ›’ **Shopping Cart** - Add, remove, and manage items
- ğŸ’³ **Payment Processing** - Razorpay integration (Swish & Card coming soon)
- ğŸ” **Age Verification** - For restricted products
- ğŸ“¦ **Product Dispensing** - Real-time dispensing status
- ğŸ§¾ **Digital Receipts** - Downloadable order receipts
- ğŸŒ **Multi-Language** - English, Swedish, Hindi (extensible)
- ğŸ“± **PWA Support** - Install on mobile devices

### Developer Experience (New! âœ¨)
- ğŸ”„ **Real-Time VM Status** - Monitor vending machine connection
- ğŸ’¬ **User-Friendly Errors** - Clear, actionable error messages
- ğŸ¯ **Centralized Config** - Type-safe environment & constants
- ğŸ›¡ï¸ **Error Boundaries** - Graceful error handling
- ğŸ“– **Comprehensive Docs** - Implementation guides & troubleshooting
- ğŸ—ï¸ **SOLID Principles** - Scalable, maintainable architecture

## Technologies

- **Next.js 15** - React framework with App Router
- **TypeScript** - Type safety
- **Tailwind CSS** - Styling
- **shadcn/ui** - UI components
- **Zustand** - State management
- **next-pwa** - PWA support
- **React Query** - Data fetching

## ğŸš€ Quick Start

> **First time setup?** See [`QUICK_START.md`](QUICK_START.md) for step-by-step instructions!

### Prerequisites

- **Node.js 18+** and npm
- **VM Service** running (backend API)
- Store ID and VM ID from your VM Service database

### Installation

```bash
# 1. Install dependencies
npm install

# 2. Configure environment variables
cp .env.example .env
# Edit .env with your values

# 3. Configure store and VM IDs (interactive)
node scripts/setup-store.js

# 4. Run development server
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

### Having Issues?

- **Store Not Found Error?** â†’ See [`QUICK_START.md`](QUICK_START.md)
- **Toast Messages Not Showing?** â†’ See [`TROUBLESHOOTING.md`](TROUBLESHOOTING.md)
- **Want to Understand the Code?** â†’ See [`IMPLEMENTATION_GUIDE.md`](IMPLEMENTATION_GUIDE.md)
- **What Changed Recently?** â†’ See [`CHANGES_SUMMARY.md`](CHANGES_SUMMARY.md)

### Build for Production

```sh
# Build the application
npm run build

# Start production server
npm start
```

### Test GitHub Pages Build Locally

To test the GitHub Pages build locally before deploying:

```sh
# Build with GitHub Pages base path (replace 'vamo-store-main' with your repo name)
NEXT_PUBLIC_BASE_PATH="/vamo-store-main" npm run build

# Serve the static files (requires a static file server)
npx serve out
```

Or use Python's built-in server:
```sh
cd out && python3 -m http.server 3000
```

Then visit `http://localhost:3000/vamo-store-main/`

## PWA Setup

This app is configured as a Progressive Web App. To complete the PWA setup:

1. **Add PWA Icons** âš ï¸ **REQUIRED for install prompt**:
   - Create `icon-192.png` (192x192 pixels)
   - Create `icon-512.png` (512x512 pixels)
   - Place both in `/public` folder
   - Run `node scripts/create-icons.js` for instructions
   - See `PWA_TROUBLESHOOTING.md` for detailed help

2. **Service Worker**: The service worker is automatically generated by `next-pwa` during build.
   - âš ï¸ **Disabled in development mode** - test with production build

3. **Manifest**: The manifest.json is already configured in `/public/manifest.json`.

4. **Install Prompt**: A custom install prompt component is included and will show when:
   - Icons are added
   - Running on HTTPS or localhost
   - Using production build
   - Browser supports PWA installation

**âš ï¸ Install prompt won't show until PNG icons are created!** See `PWA_TROUBLESHOOTING.md` for help.

## ğŸ“ Project Structure

```
vamo-store-main/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router pages
â”‚   â”‚   â”œâ”€â”€ payment/           # Payment page with VM checks âœ¨
â”‚   â”‚   â”œâ”€â”€ dispensing/        # Dispensing page
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx  # Error handling âœ¨
â”‚   â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â””â”€â”€ ui/                # shadcn/ui components
â”‚   â”œâ”€â”€ config/                # âœ¨ NEW
â”‚   â”‚   â”œâ”€â”€ env.ts            # Environment validation
â”‚   â”‚   â””â”€â”€ constants.ts      # App constants
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useVMStatus.ts    # âœ¨ VM monitoring hook
â”‚   â”œâ”€â”€ i18n/                  # âœ¨ NEW - Translations
â”‚   â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”‚   â”œâ”€â”€ en.json       # English
â”‚   â”‚   â”‚   â”œâ”€â”€ sv.json       # Swedish
â”‚   â”‚   â”‚   â””â”€â”€ hi.json       # Hindi
â”‚   â”‚   â””â”€â”€ request.ts
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api/              # API services
â”‚   â”‚   â”œâ”€â”€ stores/           # Zustand state
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ toast.ts      # âœ¨ Toast utilities
â”‚   â”‚   â”‚   â””â”€â”€ formatters.ts
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â””â”€â”€ pages/                # Page components
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ setup-store.js        # âœ¨ Setup helper
â”œâ”€â”€ public/                    # Static assets
â”œâ”€â”€ IMPLEMENTATION_GUIDE.md   # âœ¨ Full technical docs
â”œâ”€â”€ TROUBLESHOOTING.md        # âœ¨ Problem solving
â”œâ”€â”€ CHANGES_SUMMARY.md        # âœ¨ What changed
â”œâ”€â”€ QUICK_START.md            # âœ¨ Fast setup guide
â””â”€â”€ next.config.js

âœ¨ = New or significantly updated
```

## Development

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm start` - Start production server
- `npm run lint` - Run ESLint

## Deployment

### GitHub Pages (Automatic)

This project is configured for automatic deployment to GitHub Pages:

1. **Enable GitHub Pages**:
   - Go to your repository Settings â†’ Pages
   - Under "Source", select "GitHub Actions"
   - Save the settings

2. **Push to main branch**:
   ```bash
   git add .
   git commit -m "Configure for GitHub Pages"
   git push origin main
   ```

3. **Automatic Deployment**:
   - The GitHub Actions workflow will automatically build and deploy
   - Your site will be available at: `https://[username].github.io/[repository-name]/`
   - For example: `https://yourusername.github.io/vamo-store-main/`

4. **Monitor Deployment**:
   - Go to the "Actions" tab in your repository
   - Watch the workflow run and deploy

**Note**: The app is configured to work in a subdirectory (repository name). If deploying to `username.github.io` (root domain), update `next.config.js` to remove the `basePath` configuration.

### Other Deployment Options

This Next.js app can also be deployed to:
- **Vercel** (recommended for Next.js with full features)
- **Netlify**
- **Any Node.js hosting** that supports Next.js

For Vercel deployment:
1. Push your code to GitHub
2. Import the project in Vercel
3. Deploy automatically on every push

---

## ğŸ“– Documentation

Comprehensive guides are available:

| Document | Description |
|----------|-------------|
| [`QUICK_START.md`](QUICK_START.md) | Get running in 5 minutes - fix common setup issues |
| [`IMPLEMENTATION_GUIDE.md`](IMPLEMENTATION_GUIDE.md) | Complete technical guide - architecture, APIs, patterns |
| [`CHANGES_SUMMARY.md`](CHANGES_SUMMARY.md) | What's new - recent improvements and migration guide |
| [`TROUBLESHOOTING.md`](TROUBLESHOOTING.md) | Problem solving - solutions to common issues |

## ğŸ†• Recent Improvements

**Version 1.0.0** (January 2026)

âœ… **VM Status Monitoring**
- Real-time connection status checks
- Visual indicators on payment page
- Automatic retry on connection loss

âœ… **User-Friendly Error Messages**
- No more technical jargon
- Clear, actionable error messages
- Toast notifications for all events

âœ… **Multi-Language Infrastructure**
- Translation files for EN, SV, HI
- Easy to add more languages
- Ready for internationalization

âœ… **Centralized Configuration**
- Type-safe environment variables
- All constants in one place
- Better maintainability

âœ… **Enhanced Payment Flow**
- Pre-payment validation
- Step-by-step progress toasts
- Better error handling
- Payment retry mechanisms

âœ… **Error Boundaries**
- Graceful error handling
- User-friendly error UI
- Prevents app crashes

See [`CHANGES_SUMMARY.md`](CHANGES_SUMMARY.md) for full details.

## ğŸ¤ Contributing

Contributions are welcome! Please follow these guidelines:

1. **Code Style**
   - Follow SOLID principles
   - Add JSDoc comments to functions
   - Use TypeScript types properly
   - Follow existing naming conventions

2. **Documentation**
   - Update relevant docs
   - Add usage examples
   - Include troubleshooting tips

3. **Testing**
   - Test all changes locally
   - Check error scenarios
   - Verify error messages are user-friendly

## ğŸ“ License

[Your License Here]

## ğŸ™ Acknowledgments

Built with:
- [Next.js](https://nextjs.org/)
- [shadcn/ui](https://ui.shadcn.com/)
- [Zustand](https://zustand-demo.pmnd.rs/)
- [Razorpay](https://razorpay.com/)
- [Sonner](https://sonner.emilkowal.ski/)

---

**Need help?** Start with [`QUICK_START.md`](QUICK_START.md) or [`TROUBLESHOOTING.md`](TROUBLESHOOTING.md)
