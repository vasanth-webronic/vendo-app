# Vamo Store - Next.js PWA

A Progressive Web App (PWA) for vending machine purchases built with Next.js, React, and TypeScript.

## Features

- ğŸ›’ Shopping cart functionality
- ğŸ’³ Payment processing (Swish & Card)
- ğŸ” Age verification for restricted products
- ğŸ“¦ Product dispensing simulation
- ğŸ§¾ Digital receipts
- ğŸ“± Full PWA support with offline capabilities
- ğŸ¨ Modern UI with shadcn/ui components

## Technologies

- **Next.js 15** - React framework with App Router
- **TypeScript** - Type safety
- **Tailwind CSS** - Styling
- **shadcn/ui** - UI components
- **Zustand** - State management
- **next-pwa** - PWA support
- **React Query** - Data fetching

## Getting Started

### Prerequisites

- Node.js 18+ and npm (or yarn/pnpm)
- [Install with nvm](https://github.com/nvm-sh/nvm#installing-and-updating)

### Installation

```sh
# Install dependencies
npm install

# Run development server
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

### Build for Production

```sh
# Build the application
npm run build

# Start production server
npm start
```

### Test GitHub Pages Build Locally

To test the GitHub Pages build locally before deploying:

```sh
# Build with GitHub Pages base path (replace 'vamo-store-main' with your repo name)
NEXT_PUBLIC_BASE_PATH="/vamo-store-main" npm run build

# Serve the static files (requires a static file server)
npx serve out
```

Or use Python's built-in server:
```sh
cd out && python3 -m http.server 3000
```

Then visit `http://localhost:3000/vamo-store-main/`

## PWA Setup

This app is configured as a Progressive Web App. To complete the PWA setup:

1. **Add PWA Icons** âš ï¸ **REQUIRED for install prompt**:
   - Create `icon-192.png` (192x192 pixels)
   - Create `icon-512.png` (512x512 pixels)
   - Place both in `/public` folder
   - Run `node scripts/create-icons.js` for instructions
   - See `PWA_TROUBLESHOOTING.md` for detailed help

2. **Service Worker**: The service worker is automatically generated by `next-pwa` during build.
   - âš ï¸ **Disabled in development mode** - test with production build

3. **Manifest**: The manifest.json is already configured in `/public/manifest.json`.

4. **Install Prompt**: A custom install prompt component is included and will show when:
   - Icons are added
   - Running on HTTPS or localhost
   - Using production build
   - Browser supports PWA installation

**âš ï¸ Install prompt won't show until PNG icons are created!** See `PWA_TROUBLESHOOTING.md` for help.

## Project Structure

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # Next.js App Router pages
â”‚   â”‚   â”œâ”€â”€ layout.tsx   # Root layout
â”‚   â”‚   â”œâ”€â”€ page.tsx     # Home page
â”‚   â”‚   â””â”€â”€ [routes]/    # Other pages
â”‚   â”œâ”€â”€ components/       # React components
â”‚   â”œâ”€â”€ lib/             # Utilities, stores, types
â”‚   â””â”€â”€ pages/           # Page components (legacy, used by app router)
â”œâ”€â”€ public/              # Static assets
â””â”€â”€ next.config.js       # Next.js configuration
```

## Development

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm start` - Start production server
- `npm run lint` - Run ESLint

## Deployment

### GitHub Pages (Automatic)

This project is configured for automatic deployment to GitHub Pages:

1. **Enable GitHub Pages**:
   - Go to your repository Settings â†’ Pages
   - Under "Source", select "GitHub Actions"
   - Save the settings

2. **Push to main branch**:
   ```bash
   git add .
   git commit -m "Configure for GitHub Pages"
   git push origin main
   ```

3. **Automatic Deployment**:
   - The GitHub Actions workflow will automatically build and deploy
   - Your site will be available at: `https://[username].github.io/[repository-name]/`
   - For example: `https://yourusername.github.io/vamo-store-main/`

4. **Monitor Deployment**:
   - Go to the "Actions" tab in your repository
   - Watch the workflow run and deploy

**Note**: The app is configured to work in a subdirectory (repository name). If deploying to `username.github.io` (root domain), update `next.config.js` to remove the `basePath` configuration.

### Other Deployment Options

This Next.js app can also be deployed to:
- **Vercel** (recommended for Next.js with full features)
- **Netlify**
- **Any Node.js hosting** that supports Next.js

For Vercel deployment:
1. Push your code to GitHub
2. Import the project in Vercel
3. Deploy automatically on every push
